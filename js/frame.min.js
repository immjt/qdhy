var sdMap,g_userid="",g_username="",isImg=!1;function initPage(){sdMap=new SDMap("mapDiv",{scaleLine:!0,keyboard:!0,layerSwitch:0,mousePosition:!0});MapToolUI.init(sdMap);RightMenu.init(sdMap);PoiInfoPop.init(sdMap);WidgetManger.init(sdMap);TopMenu.init();leftMenu.init();wmswmts.init(sdMap.map);data.init(sdMap);qsgk.init(sdMap);checkLogin()}(function(){Browser.ie6||Browser.ie6Compat||Browser.ie7||Browser.ie7Compat?alert("\u5f53\u524d\u4f7f\u7528ie\u5185\u6838\u7248\u672c\u592a\u4f4e,\u90e8\u5206\u529f\u80fd\u5c06\u65e0\u6cd5\u4f7f\u7528\uff0c\u5efa\u8bae\u4f7f\u7528IE8\u53ca\u4ee5\u4e0a\u7248\u672c\u6d4f\u89c8\u5668\uff01"):LoadCtr()})();function LoadCtr(){initProject()}function initProject(){$(function(){$("#mapDiv").css("width","100%");$("#left_hidden").click(function(c){$(this).hasClass("show")?($(this).removeClass("show"),$(this).attr({title:"\u6536\u8d77\u5de6\u680f"}),$("#left").css("display","block"),$("#center").css({width:$(window).width()-359,left:359}).attr("data-calc-width","100%-359px")):($(this).addClass("show"),$(this).attr({title:"\u5c55\u5f00\u5de6\u680f"}),$("#left").css("display","none"),$("#center").css({width:$(window).width(),left:0}).attr("data-calc-width","100%-0px"));sdMap.map.updateSize()});$("#Rw_top_back").click(function(){var c=$("#Rw_top_img");c.hasClass("hide")?(c.removeClass("hide"),$("#result_content").show()):(c.addClass("hide"),$("#result_content").hide())});initPage()})}var TopMenu=function(){var c=[];return{init:function(){for(var d in c){var b=c[d],a=["\x3cul class\x3d'submenu'\x3e"];if(null!=b.sublist){for(var g in b.sublist)a.push("\x3cli id\x3d'"+g+"'\x3e"+b.sublist[g]+"\x3c/li\x3e");a.push("\x3c/ul\x3e");$("#"+b.parent).append(a.join(""))}}$("#nav\x3eli").mouseenter(function(){var a=$(this).children(".submenu");0<a.length&&a.show()});$("#nav\x3eli").mouseleave(function(){var a=$(this).children(".submenu");0<a.length&&a.hide()});$("#nav").on("click",".submenu\x3eli",function(){var a=$(this),b;a:{b=a.parent().parent()[0].id;for(var g in c)if(c[g].parent==b){b=c[g];break a}b=null}b&&b.handler&&b.handler(a[0].id)});$("#d_xxzy").click(function(){leftMenu.addTab({name:"resource"})})},addSubMenu:function(d){var b=["\x3cul class\x3d'submenu'\x3e"];if(null!=d.sublist){for(var a in d.sublist)b.push("\x3cli id\x3d'"+a+"'\x3e"+d.sublist[a]+"\x3c/li\x3e");b.push("\x3c/ul\x3e");$("#"+d.parent).append(b.join(""))}c.push(d)}}}(),leftMenu=function(){function c(){$("#contentPanel #tab_resource_div").show().siblings().hide()}function d(a,c){c||$("#contentPanel").children().hide();var e;a:{for(e in b)if(b[e].name==a.name){e=b[e];break a}e=null}e?($("#"+e.name+"_menu").addClass("cur").siblings().removeClass("cur"),$("#contentPanel #"+e.div).show().siblings().hide()):(e=["\x3cli id\x3d'",a.name,"_menu'\x3e\x3cimg src\x3d'",a.imgurl,"'/\x3e\x3cspan\x3e",a.title,"\x3c/span\x3e","\x3c/li\x3e"],c||e.splice(e.length-1,0,"\x3cdiv class\x3d'deldiv'\x3e\x3c/div\x3e"),$("#leftMenu").append(e.join("")),a.handler&&a.handler(),b.push({name:a.name,div:a.div,handler:a.handler,clear:a.clear}),$("#leftMenu li:last").addClass("cur").siblings().removeClass("cur"))}var b=[];return{init:function(){d({name:"resource",div:"tab_resource_div",title:"\u5bfc\u822a",imgurl:"images/leftDiv/bdico_03.png",handler:c,clear:null},!0);$("#leftMenu").on("click","li",function(){var a=$(this);if(!a.hasClass("cur")){a.addClass("cur").siblings().removeClass("cur");var a=a[0].id.replace("_menu",""),c;for(c in b)if(b[c].name==a){$("#contentPanel #"+b[c].div).show().siblings().hide();break}}});$("#leftMenu").on("click",".deldiv",function(a){var d=$(this).parent(),e=d[0].id.replace("_menu",""),f;for(f in b)if(b[f].name==e){$("#contentPanel #"+b[f].div).hide();b[f].clear&&b[f].clear();b.splice(f,1);break}d.hasClass("cur")&&($("#leftMenu li:eq(0)").addClass("cur"),c());d.remove();a.stopImmediatePropagation()})},addTab:d}}();function locationLogin(){window.location.href="login.html"}function locationReg(){window.location.href="register.html"}function userout(){delCookie("USERID");delCookie("JSESSIONID");delCookie("USERNAME");$("#login").html("\u767b\u5f55");$("#login").attr("href","login.html");$("#reg").html("\u6ce8\u518c");$("#reg").attr("href","register.html");window.location.reload()}function checkLogin(){if("0"!=g_userid){var c=getSubString(g_username,5);$("#login").html(c);$("#login").attr("href","javascript:void(0)");$("#reg").html("\u9000\u51fa");$("#reg").attr("href","javaScript:userout()")}};